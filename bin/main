#!/usr/bin/env ruby
# frozen_string_literal: true

# rubocop: disable Style/StringLiterals
require_relative  '../lib/board.rb'
require_relative  '../lib/player.rb'
require_relative  '../lib/logic.rb'

puts " Hello and welcome to Tic Tac Toe Game."
puts "First player enter your nickname: "
name_one = gets.chomp
player_one = Player.new(name_one, 'X')
puts "First player name: #{name_one}, your token is 'X' "
puts "Second player enter your nickname: "
name_two = gets.chomp
player_two = Player.new(name_two, 'O')
puts "Second player name: #{name_two}, your token is 'O' "

win_lose = false
until win_lose
  arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
  who = rand(0..1)
  display = Board.new(arr)
  display.display_board
  current_player = player_one
  count = 1
  while  count <= 9 && !win_lose
    player_choice = player_one.get_choice(arr)
    current = Logic.turn(arr, current_player, player_choice)
    if current == true
      win_lose = true
      puts "\nCongratulations, #{current_player.name}. You win!"
      break
    end
    if current_player == player_one
      current_player = player_two
    elsif current_player == player_two
      current_player = player_one
    end
    count += 1
  end



  puts "You've both tied, #{name_one} and #{name_two}" if win_lose == false

  reset_game = Logic.reset
  if reset_game == true
    puts "Let us start"
    win_lose = false
  else
    break
  end
end
